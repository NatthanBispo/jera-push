<table class="highlight">
  <thead>
    <tr>
      <th data-field="resource"><%= t('jera_push.admin.message_devices.attributes.resource') %></th>
      <th data-field="status"><%= t('jera_push.admin.message_devices.attributes.status') %></th>
      <th data-field="message"><%= t('jera_push.admin.message_devices.attributes.metadata') %></th>
      <th data-field="info"><%= t('jera_push.admin.message_devices.attributes.device') %></th>
    </tr>
  </thead>
  <tbody>
    <% message_devices.each do |message_device| %>
      <tr>
        <td>
          <% resource_extras(message_device).each do |attribute| %>
            <div><%= attribute %></div>
          <% end %>
        </td>
        <td>
          <%= message_device.status ? t("jera_push.admin.message_devices.status.#{message_device.status}") : t("jera_push.admin.message_devices.status.undefined") %>
        </td>
        <td>
          <% if message_device.status && message_device.status.error? %>
            <div><%= t('jera_push.admin.message_devices.attributes.error_message') %></div>
            <div><%= message_device.error_message %></div>
          <% end %>

          <% if message_device.status && message_device.status.success? %>
            <div><%= t('jera_push.admin.message_devices.attributes.firebase_id') %></div>
            <div><%= message_device.firebase_id %></div>
          <% end %>
        </td>
        <td>
          <div><%= message_device.device.platform %></div>
          <div><%= message_device.device.token.truncate(20) %></div>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
